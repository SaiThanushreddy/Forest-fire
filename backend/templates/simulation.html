<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fire Simulation | FireSight AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/main.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="page-simulation">
    <!-- Navigation -->
    <nav class="navbar glass-morphism">
        <div class="nav-brand">
            <div class="brand-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
                    <path d="M12 6v6l4 2"/>
                </svg>
            </div>
            <span class="brand-text">FireSight AI</span>
        </div>
        <div class="nav-links">
            <a href="/" class="nav-link">Home</a>
            <a href="/prediction" class="nav-link">Prediction</a>
            <a href="/simulation" class="nav-link active">Simulation</a>
            <a href="/analytics" class="nav-link">Analytics</a>
            <a href="/map" class="nav-link">Map</a>
        </div>
        <div class="nav-status">
            <div class="status-indicator" id="sim-status"></div>
            <span id="sim-status-text">Ready</span>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="simulation-main">
        <div class="simulation-container">
            <!-- Control Panel -->
            <aside class="sim-control-panel glass-morphism">
                <h2 class="panel-title">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                        <path d="M2 17l10 5 10-5"/>
                    </svg>
                    Simulation Parameters
                </h2>

                <!-- Wind Controls -->
                <div class="param-group">
                    <h3 class="param-title">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9.59 4.59A2 2 0 1111 8H2m10.59 11.41A2 2 0 1014 16H2m15.73-8.27A2.5 2.5 0 1119.5 12H2"/>
                        </svg>
                        Wind
                    </h3>
                    <div class="control-row">
                        <label>Speed (m/s)</label>
                        <input type="range" id="wind-speed" min="0" max="30" value="8" class="slider">
                        <span id="wind-speed-val">8</span>
                    </div>
                    <div class="control-row">
                        <label>Direction</label>
                        <div class="wind-compass">
                            <div class="compass-ring">
                                <span class="compass-dir" data-dir="0">N</span>
                                <span class="compass-dir" data-dir="90">E</span>
                                <span class="compass-dir" data-dir="180">S</span>
                                <span class="compass-dir" data-dir="270">W</span>
                            </div>
                            <div class="compass-needle" id="compass-needle"></div>
                            <input type="range" id="wind-dir" min="0" max="360" value="45" class="slider hidden">
                        </div>
                        <span id="wind-dir-val">45</span>
                    </div>
                </div>

                <!-- Weather Controls -->
                <div class="param-group">
                    <h3 class="param-title">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 14.76V3.5a2.5 2.5 0 00-5 0v11.26a4.5 4.5 0 105 0z"/>
                        </svg>
                        Weather
                    </h3>
                    <div class="control-row">
                        <label>Temperature</label>
                        <input type="range" id="temperature" min="20" max="50" value="38" class="slider temp-slider">
                        <span id="temp-val">38C</span>
                    </div>
                    <div class="control-row">
                        <label>Humidity</label>
                        <input type="range" id="humidity" min="10" max="90" value="25" class="slider humid-slider">
                        <span id="humid-val">25%</span>
                    </div>
                </div>

                <!-- Fire Parameters -->
                <div class="param-group">
                    <h3 class="param-title">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 23c-4.97 0-9-3.58-9-8 0-4.5 4-8.5 4-12 0 3.5 3 5 3 5s-1-2.5 1-5c2 2.5 5 4 5 8 0 1-.5 2-1 3 1-1 2-2.5 2-4.5 0 5-2 6.5-2 6.5s2-1 3-4c0 5.5-3 11-6 11z"/>
                        </svg>
                        Fire Settings
                    </h3>
                    <div class="control-row">
                        <label>Spread Prob</label>
                        <input type="range" id="spread-prob" min="10" max="60" value="35" class="slider fire-slider">
                        <span id="spread-val">35%</span>
                    </div>
                    <div class="control-row">
                        <label>Initial Fires</label>
                        <input type="range" id="num-fires" min="1" max="10" value="3" class="slider">
                        <span id="fires-val">3</span>
                    </div>
                    <div class="control-row">
                        <label>Time Steps</label>
                        <input type="range" id="time-steps" min="20" max="100" value="50" class="slider">
                        <span id="steps-val">50</span>
                    </div>
                </div>

                <!-- Playback Controls -->
                <div class="playback-controls">
                    <button id="btn-run" class="btn btn-primary">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <polygon points="5 3 19 12 5 21 5 3"/>
                        </svg>
                        Run
                    </button>
                    <button id="btn-pause" class="btn btn-secondary" disabled>
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <rect x="6" y="4" width="4" height="16"/>
                            <rect x="14" y="4" width="4" height="16"/>
                        </svg>
                        Pause
                    </button>
                    <button id="btn-reset" class="btn btn-outline">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 12a9 9 0 109-9 9 9 0 00-9 9z"/>
                            <path d="M12 8v4l2 2"/>
                        </svg>
                        Reset
                    </button>
                </div>

                <!-- Speed Control -->
                <div class="speed-control">
                    <label>Playback Speed</label>
                    <div class="speed-buttons">
                        <button class="speed-btn" data-speed="0.5">0.5x</button>
                        <button class="speed-btn active" data-speed="1">1x</button>
                        <button class="speed-btn" data-speed="2">2x</button>
                        <button class="speed-btn" data-speed="4">4x</button>
                    </div>
                </div>
            </aside>

            <!-- 3D Simulation View -->
            <section class="sim-3d-view">
                <div class="sim-header glass-morphism">
                    <h2>3D Fire Spread Simulation</h2>
                    <div class="sim-progress">
                        <span id="current-step">0</span> / <span id="total-steps">0</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="sim-progress"></div>
                        </div>
                    </div>
                </div>
                <div id="simulation-3d" class="simulation-canvas"></div>
                <div class="sim-legend">
                    <span class="legend-item"><span class="legend-color forest"></span>Forest</span>
                    <span class="legend-item"><span class="legend-color burning"></span>Burning</span>
                    <span class="legend-item"><span class="legend-color burned"></span>Burned</span>
                </div>
            </section>

            <!-- Stats Panel -->
            <aside class="sim-stats-panel glass-morphism">
                <h2 class="panel-title">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 20V10M12 20V4M6 20v-6"/>
                    </svg>
                    Real-time Statistics
                </h2>

                <!-- Live Stats -->
                <div class="live-stats">
                    <div class="live-stat">
                        <div class="live-stat-icon forest-icon"></div>
                        <div class="live-stat-info">
                            <span class="live-stat-value" id="stat-unburned">100%</span>
                            <span class="live-stat-label">Unburned</span>
                        </div>
                    </div>
                    <div class="live-stat">
                        <div class="live-stat-icon burning-icon"></div>
                        <div class="live-stat-info">
                            <span class="live-stat-value" id="stat-burning">0%</span>
                            <span class="live-stat-label">Burning</span>
                        </div>
                    </div>
                    <div class="live-stat">
                        <div class="live-stat-icon burned-icon"></div>
                        <div class="live-stat-info">
                            <span class="live-stat-value" id="stat-burned">0%</span>
                            <span class="live-stat-label">Burned</span>
                        </div>
                    </div>
                </div>

                <!-- Area Chart -->
                <div class="chart-container">
                    <h3>Fire Spread Over Time</h3>
                    <canvas id="spread-chart"></canvas>
                </div>

                <!-- Summary Stats -->
                <div class="summary-stats">
                    <div class="summary-item">
                        <span class="summary-label">Total Area</span>
                        <span class="summary-value">4,096 cells</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Peak Burning</span>
                        <span class="summary-value" id="peak-burning">--</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Total Burned</span>
                        <span class="summary-value" id="total-burned">--</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Spread Rate</span>
                        <span class="summary-value" id="spread-rate">--</span>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <script src="/static/js/main.js"></script>
    <script src="/static/js/simulation.js"></script>
</body>
</html>
