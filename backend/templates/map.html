<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geographic Map | FireSight AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
</head>
<body class="page-map">
    <!-- Navigation -->
    <nav class="navbar glass-morphism">
        <div class="nav-brand">
            <div class="brand-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
                    <path d="M12 6v6l4 2"/>
                </svg>
            </div>
            <span class="brand-text">FireSight AI</span>
        </div>
        <div class="nav-links">
            <a href="/" class="nav-link">Home</a>
            <a href="/prediction" class="nav-link">Prediction</a>
            <a href="/simulation" class="nav-link">Simulation</a>
            <a href="/analytics" class="nav-link">Analytics</a>
            <a href="/map" class="nav-link active">Map</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="map-main">
        <div class="map-container">
            <!-- Map Controls Sidebar -->
            <aside class="map-sidebar glass-morphism">
                <h2 class="sidebar-title">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                    Map Controls
                </h2>

                <!-- Layer Controls -->
                <div class="control-section">
                    <h3>Map Layers</h3>
                    <div class="layer-toggles">
                        <label class="toggle-switch">
                            <input type="checkbox" id="layer-heatmap" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Fire Heatmap</span>
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="layer-markers" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Fire Markers</span>
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="layer-risk">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Risk Zones</span>
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="layer-terrain">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Terrain</span>
                        </label>
                    </div>
                </div>

                <!-- Date Filter -->
                <div class="control-section">
                    <h3>Date Range</h3>
                    <div class="date-inputs">
                        <div class="date-field">
                            <label>From</label>
                            <input type="date" id="date-from" value="2018-01-01">
                        </div>
                        <div class="date-field">
                            <label>To</label>
                            <input type="date" id="date-to" value="2023-12-31">
                        </div>
                    </div>
                    <button id="apply-filter" class="btn btn-primary btn-full">Apply Filter</button>
                </div>

                <!-- Map Style -->
                <div class="control-section">
                    <h3>Map Style</h3>
                    <div class="style-options">
                        <button class="style-btn active" data-style="dark">Dark</button>
                        <button class="style-btn" data-style="satellite">Satellite</button>
                        <button class="style-btn" data-style="terrain">Terrain</button>
                        <button class="style-btn" data-style="light">Light</button>
                    </div>
                </div>

                <!-- Location Info -->
                <div class="control-section location-info">
                    <h3>Location Details</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Region</span>
                            <span class="info-value">Almora</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">State</span>
                            <span class="info-value">Uttarakhand</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Latitude</span>
                            <span class="info-value" id="info-lat">29.5971</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Longitude</span>
                            <span class="info-value" id="info-lon">79.6591</span>
                        </div>
                    </div>
                </div>

                <!-- Weather Widget -->
                <div class="control-section weather-widget">
                    <h3>Current Weather</h3>
                    <div class="weather-display">
                        <div class="weather-main">
                            <span class="weather-temp" id="weather-temp">--C</span>
                            <span class="weather-icon">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <circle cx="12" cy="12" r="5"/>
                                    <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                                </svg>
                            </span>
                        </div>
                        <div class="weather-details">
                            <span>Humidity: <b id="weather-humid">--%</b></span>
                            <span>Wind: <b id="weather-wind">-- m/s</b></span>
                            <span>Fire Index: <b id="weather-fwi">--</b></span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Map View -->
            <section class="map-view">
                <div id="leaflet-map" class="leaflet-map"></div>

                <!-- Map Info Overlay -->
                <div class="map-overlay top-left glass-morphism">
                    <h3>Almora Fire Map</h3>
                    <p id="fire-count">Loading fire data...</p>
                </div>

                <!-- Coordinates Display -->
                <div class="map-overlay bottom-left glass-morphism coordinates">
                    <span id="mouse-coords">Lat: --, Lon: --</span>
                </div>

                <!-- Legend -->
                <div class="map-overlay bottom-right glass-morphism legend">
                    <h4>Fire Intensity</h4>
                    <div class="legend-gradient"></div>
                    <div class="legend-labels">
                        <span>Low</span>
                        <span>Medium</span>
                        <span>High</span>
                    </div>
                </div>

                <!-- Zoom Controls (Custom) -->
                <div class="map-overlay top-right zoom-controls glass-morphism">
                    <button id="zoom-in" class="zoom-btn">+</button>
                    <button id="zoom-out" class="zoom-btn">-</button>
                    <button id="zoom-fit" class="zoom-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/>
                        </svg>
                    </button>
                </div>
            </section>
        </div>
    </main>

    <script src="/static/js/main.js"></script>
    <script src="/static/js/map.js"></script>
</body>
</html>
